// Create by Jun Fan
// Date 5th, May
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Prescreen</title>
</head>
<body>
<textarea class="prescreen-input" rows="10" cols="50">
John: 2
Jane: 3
John: 4
Jane: 5
</textarea><br>
<button type="button" class="prescreen-button" onclick="myFunction()">Count</button>
<div class="prescreen-output"></div>

	<script type="text/javascript">	
		function myFunction() {
			//map for key word and count.
			var map = new Object();
			//use for store key word.
			var string = "";
			//clear innerTHML area.
			document.getElementsByClassName("prescreen-output")[0].innerHTML = "";

			//get textarea value from dom
		    var input = document.getElementsByClassName("prescreen-input")[0].value;    

		    //break textarea value from string to a modified array use regular expression.                   
		    var res = input.replace(/\n/g, ':').replace(/  +/g, ' ').split(":");      

 			//modify array value. ignore last item cause it's whitespace.
 			for(var i = 0; i < res.length-1; i++){
 				if(parseInt(res[i])){
 					res[i] = parseInt(res[i]);
 				}
 			}

 			//put them into map.
		    for(var i = 0; i < res.length-1; i++){
		    	if(!Number.isInteger(res[i])){
		    		string = res[i];
		    		if(map[res[i]] === undefined){
		    			map[res[i]] = 0;
		    		}
		    	}
		    	else if(Number.isInteger(res[i])){
		    		map[string] += res[i];
		    	}
		    }
		    
		    //print out all item inside map object.
		    for(var index in map) { 
		    	

		    	if(isPalindrome(index)){
		    		document.getElementsByClassName("prescreen-output")[0].innerHTML += "<span class='prescreen-palindrome'>The total for " + index + " is " + map[index] + ".</span>";
		    	}
		    	else{
		    		document.getElementsByClassName("prescreen-output")[0].innerHTML += "<span>The total for " + index + " is " + map[index] + ".</span>";
		    	}
   		    	
		    }
		}

		//decide if it is palindrome.
		function isPalindrome(str) {
			var string = str.replace(/[^a-zA-Z]+/g, '').toLowerCase();
			return string === string.split('').reverse().join('');
		}
	</script>
</body>
</html>
